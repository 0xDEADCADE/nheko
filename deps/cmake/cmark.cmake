set(WINDOWS_FLAGS "")

if(MSVC)
    set(WINDOWS_FLAGS "-DCMAKE_GENERATOR_PLATFORM=x64")
endif()

ExternalProject_Add(
  cmark

  URL ${CMARK_URL}
  URL_HASH SHA256=${CMARK_HASH}

  BUILD_IN_SOURCE 0
  SOURCE_DIR ${DEPS_BUILD_DIR}/cmark
  CONFIGURE_COMMAND ${CMAKE_COMMAND}
  -DCMAKE_INSTALL_PREFIX=${DEPS_INSTALL_DIR}
  -DCMARK_TESTS=OFF
  ${DEPS_BUILD_DIR}/cmark
  ${WINDOWS_FLAGS})

list(APPEND THIRD_PARTY_DEPS cmark)
